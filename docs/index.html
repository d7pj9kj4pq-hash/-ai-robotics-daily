<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– AIæœºå™¨äººæ—¥æŠ¥</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        header {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 10px;
            margin-bottom: 30px;
        }
        h1 {
            margin: 0;
        }
        .date {
            color: #666;
            margin-bottom: 20px;
        }
        .report-link {
            display: block;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 5px;
            margin: 10px 0;
            text-decoration: none;
            color: #333;
            border-left: 4px solid #667eea;
        }
        .report-link:hover {
            background: #eef2ff;
        }
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
            margin: 20px 0;
        }
        .image-grid img {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }
        .status {
            padding: 10px;
            background: #e8f5e8;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <header>
        <h1>ğŸ¤– AIæœºå™¨äººæ—¥æŠ¥ç³»ç»Ÿ</h1>
        <p>æ¯æ—¥è‡ªåŠ¨ç”ŸæˆAIä¸æœºå™¨äººé¢†åŸŸæœ€æ–°èµ„è®¯</p>
    </header>

    <div id="content">
        <h2>ä»Šæ—¥æ—¥æŠ¥</h2>
        <div id="daily-list">
            <div class="loading">æ­£åœ¨åŠ è½½æ—¥æŠ¥...</div>
        </div>
        
        <h2>ä»Šæ—¥å›¾ç‰‡</h2>
        <div id="image-list">
            <div class="loading">æ­£åœ¨åŠ è½½å›¾ç‰‡...</div>
        </div>
        
        <div class="status">
            <p>æœ€åæ£€æŸ¥æ—¶é—´: <span id="current-time"></span></p>
            <p>å¦‚æœé¡µé¢æœªæ›´æ–°ï¼Œè¯·æŒ‰ <strong>Ctrl+F5</strong> å¼ºåˆ¶åˆ·æ–°</p>
        </div>
    </div>

    <script>
        // è®¾ç½®å½“å‰æ—¶é—´
        function updateTime() {
            document.getElementById('current-time').textContent = new Date().toLocaleString('zh-CN');
        }
        
        // ç›´æ¥åˆ—å‡ºå·²çŸ¥æ–‡ä»¶ï¼ˆé¿å…ç›®å½•è¯»å–ï¼‰
        function loadContent() {
            const today = new Date().toISOString().split('T')[0];
            const yesterday = new Date();
            yesterday.setDate(yesterday.getDate() - 1);
            const yesterdayStr = yesterday.toISOString().split('T')[0];
            
            // å°è¯•åŠ è½½ä»Šå¤©çš„æ—¥æŠ¥
            const dailyList = document.getElementById('daily-list');
            
            // å°è¯•å¤šä¸ªå¯èƒ½çš„æ—¥æœŸ
            const datesToTry = [today, yesterdayStr, '2025-12-17', '2025-12-18'];
            
            let loaded = false;
            
            // å°è¯•æ¯ä¸ªæ—¥æœŸ
            datesToTry.forEach(date => {
                const url = `./daily/${date}.md`;
                fetch(url)
                    .then(response => {
                        if (response.ok && !loaded) {
                            loaded = true;
                            dailyList.innerHTML = `<a href="${url}" class="report-link" target="_blank">ğŸ“„ ${date} AIæ—¥æŠ¥</a>`;
                        }
                    })
                    .catch(() => {});
            });
            
            // å¦‚æœéƒ½æ²¡åŠ è½½åˆ°ï¼Œæ˜¾ç¤ºæç¤º
            setTimeout(() => {
                if (!loaded) {
                    dailyList.innerHTML = '<p>æš‚æ— æ—¥æŠ¥ï¼Œè¯·ç­‰å¾…ç³»ç»Ÿç”Ÿæˆ</p>';
                }
            }, 3000);
            
            // åŠ è½½å›¾ç‰‡
            const imageList = document.getElementById('image-list');
            const imagesToTry = [
                `./images/${today}/news_1.png`,
                `./images/${today}/news_2.png`,
                `./images/${today}/news_3.png`,
                `./images/${yesterdayStr}/news_1.png`,
                './images/2025-12-17/news_1.png'
            ];
            
            let imagesLoaded = 0;
            let imagesHtml = '<div class="image-grid">';
            
            imagesToTry.forEach(imgUrl => {
                // åˆ›å»ºImageå¯¹è±¡æµ‹è¯•å›¾ç‰‡æ˜¯å¦å­˜åœ¨
                const img = new Image();
                img.onload = function() {
                    imagesLoaded++;
                    imagesHtml += `<img src="${imgUrl}" alt="AIå›¾ç‰‡" loading="lazy">`;
                    if (imagesLoaded >= 3) {
                        updateImageList();
                    }
                };
                img.onerror = function() {
                    // å›¾ç‰‡ä¸å­˜åœ¨ï¼Œå¿½ç•¥
                };
                img.src = imgUrl;
            });
            
            function updateImageList() {
                imagesHtml += '</div>';
                imageList.innerHTML = imagesHtml;
            }
            
            // å¦‚æœæ²¡æœ‰å›¾ç‰‡åŠ è½½ï¼Œ3ç§’åæ˜¾ç¤ºæç¤º
            setTimeout(() => {
                if (imagesLoaded === 0) {
                    imageList.innerHTML = '<p>æš‚æ— å›¾ç‰‡ï¼Œå›¾ç‰‡ç”Ÿæˆå¯èƒ½éœ€è¦æ—¶é—´</p>';
                } else {
                    updateImageList();
                }
            }, 3000);
            
            // æ›´æ–°å½“å‰æ—¶é—´
            updateTime();
            setInterval(updateTime, 60000);
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåæ‰§è¡Œ
        document.addEventListener('DOMContentLoaded', loadContent);
        
        // æä¾›æ‰‹åŠ¨åˆ·æ–°åŠŸèƒ½
        window.refreshPage = function() {
            location.reload(true); // å¼ºåˆ¶ä»æœåŠ¡å™¨é‡æ–°åŠ è½½
        };
    </script>
</body>
</html>
