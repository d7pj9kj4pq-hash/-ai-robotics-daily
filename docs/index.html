<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¤– AIæœºå™¨äººæ—¥æŠ¥ç³»ç»Ÿ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Microsoft YaHei', sans-serif;
            line-height: 1.6;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.2);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #2c3e50 0%, #4a6491 100%);
            color: white;
            padding: 60px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px;
            animation: float 20s linear infinite;
        }
        
        @keyframes float {
            0% { transform: translate(0, 0) rotate(0deg); }
            100% { transform: translate(30px, 30px) rotate(360deg); }
        }
        
        .header h1 {
            font-size: 3.5em;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }
        
        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }
        
        .status-bar {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 20px;
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }
        
        .status-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }
        
        .status-item:last-child {
            margin-bottom: 0;
            border-bottom: none;
        }
        
        .status-label {
            font-weight: 600;
        }
        
        .status-value {
            font-weight: 300;
        }
        
        .status-good {
            color: #4CAF50;
        }
        
        .content {
            padding: 40px;
        }
        
        .section {
            margin-bottom: 40px;
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .section h2 {
            color: #2c3e50;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 3px solid #667eea;
            display: inline-block;
        }
        
        .file-list {
            list-style: none;
        }
        
        .file-item {
            background: white;
            border-radius: 10px;
            margin-bottom: 15px;
            padding: 20px;
            transition: all 0.3s ease;
            border-left: 5px solid #667eea;
            cursor: pointer;
        }
        
        .file-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            border-left-color: #4CAF50;
        }
        
        .file-link {
            display: block;
            color: #2c3e50;
            text-decoration: none;
        }
        
        .file-title {
            font-size: 1.2em;
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }
        
        .file-title::before {
            content: 'ğŸ“„';
            margin-right: 10px;
        }
        
        .file-date {
            color: #666;
            font-size: 0.9em;
        }
        
        .loading {
            text-align: center;
            padding: 40px;
            color: #666;
        }
        
        .loading::after {
            content: '';
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-left: 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .no-data {
            text-align: center;
            padding: 40px;
            color: #666;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .image-item {
            border-radius: 10px;
            overflow: hidden;
            position: relative;
            padding-top: 100%; /* 1:1 Aspect Ratio */
            background: #f0f0f0;
        }
        
        .image-item img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.3s ease;
        }
        
        .image-item:hover img {
            transform: scale(1.05);
        }
        
        .footer {
            text-align: center;
            padding: 30px;
            color: #666;
            border-top: 1px solid #eee;
            background: #f8f9fa;
        }
        
        .alert {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .alert h3 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        .alert p {
            color: #856404;
        }
        
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.5em;
            }
            
            .content {
                padding: 20px;
            }
            
            .section {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ¤– AIæœºå™¨äººæ—¥æŠ¥ç³»ç»Ÿ</h1>
            <p class="subtitle">æ¯æ—¥è‡ªåŠ¨ç”ŸæˆAIä¸æœºå™¨äººé¢†åŸŸæœ€æ–°èµ„è®¯æŠ¥å‘Š</p>
            
            <div class="status-bar">
                <div class="status-item">
                    <span class="status-label">ç³»ç»ŸçŠ¶æ€</span>
                    <span class="status-value status-good" id="system-status">è¿è¡Œä¸­</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æœ€åæ›´æ–°</span>
                    <span class="status-value" id="last-update">åŠ è½½ä¸­...</span>
                </div>
                <div class="status-item">
                    <span class="status-label">æ—¥æŠ¥æ•°é‡</span>
                    <span class="status-value" id="report-count">0</span>
                </div>
            </div>
        </header>
        
        <main class="content">
            <!-- æç¤ºä¿¡æ¯ -->
            <div class="alert" id="cache-alert">
                <h3>ğŸ’¡ æç¤º</h3>
                <p>å¦‚æœé¡µé¢å†…å®¹æœªæ›´æ–°ï¼Œè¯·æŒ‰ <kbd>Ctrl</kbd> + <kbd>F5</kbd> å¼ºåˆ¶åˆ·æ–°æµè§ˆå™¨ç¼“å­˜ã€‚</p>
            </div>
            
            <!-- æœ€æ–°æ—¥æŠ¥ -->
            <section class="section">
                <h2>ğŸ“… æœ€æ–°æ—¥æŠ¥</h2>
                <div id="daily-loading" class="loading">æ­£åœ¨åŠ è½½æ—¥æŠ¥åˆ—è¡¨...</div>
                <ul id="daily-list" class="file-list" style="display: none;"></ul>
                <div id="daily-empty" class="no-data" style="display: none;">
                    <p>æš‚æ— æ—¥æŠ¥ï¼Œç³»ç»Ÿå°†åœ¨ä»Šå¤©9ç‚¹è‡ªåŠ¨ç”Ÿæˆ</p>
                    <p><small>æ‚¨å¯ä»¥åœ¨GitHubä»“åº“çš„ <code>output/daily/</code> ç›®å½•æŸ¥çœ‹ç”Ÿæˆçš„æ–‡ä»¶</small></p>
                </div>
            </section>
            
            <!-- ä»Šæ—¥å›¾ç‰‡ -->
            <section class="section">
                <h2>ğŸ–¼ï¸ ä»Šæ—¥å›¾ç‰‡</h2>
                <div id="images-loading" class="loading">æ­£åœ¨åŠ è½½å›¾ç‰‡...</div>
                <div id="image-grid" class="image-grid" style="display: none;"></div>
                <div id="images-empty" class="no-data" style="display: none;">
                    <p>æš‚æ— å›¾ç‰‡ï¼Œå›¾ç‰‡ç”Ÿæˆå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´</p>
                </div>
            </section>
            
            <!-- ç³»ç»Ÿä¿¡æ¯ -->
            <section class="section">
                <h2>âš™ï¸ ç³»ç»Ÿä¿¡æ¯</h2>
                <div class="status-bar" style="background: #f8f9fa;">
                    <div class="status-item">
                        <span class="status-label">æ•°æ®æº</span>
                        <span class="status-value">36æ°ªã€æœºå™¨ä¹‹å¿ƒã€é‡å­ä½ç­‰</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">AIå¤„ç†</span>
                        <span class="status-value">æ™ºè°±GLMå¤§æ¨¡å‹</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">è‡ªåŠ¨åŒ–</span>
                        <span class="status-value">GitHub Actions</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">è¿è¡Œé¢‘ç‡</span>
                        <span class="status-value">æ¯æ—¥9:00ï¼ˆåŒ—äº¬æ—¶é—´ï¼‰</span>
                    </div>
                </div>
            </section>
            
            <!-- ä½¿ç”¨æŒ‡å— -->
            <section class="section">
                <h2>ğŸ“– ä½¿ç”¨æŒ‡å—</h2>
                <div style="padding: 20px; background: white; border-radius: 10px;">
                    <h3 style="color: #2c3e50; margin-bottom: 15px;">å¦‚ä½•è·å–å†…å®¹ï¼Ÿ</h3>
                    <ol style="padding-left: 20px; color: #555;">
                        <li style="margin-bottom: 10px;">ç‚¹å‡»ä¸Šæ–¹æ—¥æŠ¥é“¾æ¥æŸ¥çœ‹å†…å®¹</li>
                        <li style="margin-bottom: 10px;">å¤åˆ¶å°çº¢ä¹¦æ–‡æ¡ˆï¼ˆæ¯ç¯‡æ—¥æŠ¥ä¸­éƒ½æœ‰æä¾›ï¼‰</li>
                        <li style="margin-bottom: 10px;">ä¸‹è½½ç”Ÿæˆçš„å›¾ç‰‡ç”¨äºé…å›¾</li>
                        <li style="margin-bottom: 10px;">å‘å¸ƒåˆ°å„ç¤¾äº¤å¹³å°</li>
                    </ol>
                    
                    <h3 style="color: #2c3e50; margin-bottom: 15px; margin-top: 25px;">GitHubä»“åº“æ–‡ä»¶ä½ç½®</h3>
                    <ul style="padding-left: 20px; color: #555;">
                        <li style="margin-bottom: 5px;"><code>output/daily/</code> - æ¯æ—¥ç”Ÿæˆçš„æŠ¥å‘Š</li>
                        <li style="margin-bottom: 5px;"><code>output/export/</code> - å„å¹³å°å¯¼å‡ºæ–‡ä»¶</li>
                        <li style="margin-bottom: 5px;"><code>output/images/</code> - ç”Ÿæˆçš„å›¾ç‰‡</li>
                        <li><code>docs/daily/</code> - ç½‘é¡µç‰ˆæ—¥æŠ¥</li>
                    </ul>
                </div>
            </section>
        </main>
        
        <footer class="footer">
            <p>Â© 2024 AIæœºå™¨äººæ—¥æŠ¥ç³»ç»Ÿ | å®Œå…¨è‡ªåŠ¨åŒ–ç”Ÿæˆ | æœ€åæ£€æŸ¥æ—¶é—´: <span id="current-time"></span></p>
            <p style="margin-top: 10px; font-size: 0.9em; color: #888;">
                ç³»ç»ŸåŸºäºGitHub Actionsæ„å»º | æ•°æ®æ¥æºäºå…¬å¼€ç§‘æŠ€èµ„è®¯ | 
                <a href="https://github.com/d7pj9kj4pq-hash/-ai-robotics-daily" style="color: #667eea;">æŸ¥çœ‹æºä»£ç </a>
            </p>
        </footer>
    </div>

    <script>
        // è®¾ç½®å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            document.getElementById('current-time').textContent = 
                now.toLocaleString('zh-CN', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit',
                    hour: '2-digit',
                    minute: '2-digit',
                    second: '2-digit'
                });
        }
        
        // åŠ è½½æ—¥æŠ¥åˆ—è¡¨
        async function loadDailyReports() {
            try {
                const response = await fetch('./daily/');
                if (!response.ok) {
                    throw new Error('æ— æ³•è®¿é—®æ—¥æŠ¥ç›®å½•');
                }
                
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // æŸ¥æ‰¾æ‰€æœ‰çš„Markdownæ–‡ä»¶é“¾æ¥
                const links = Array.from(doc.querySelectorAll('a'))
                    .filter(a => a.href.endsWith('.md'))
                    .map(a => ({
                        name: a.textContent.replace('.md', ''),
                        url: a.href,
                        date: a.textContent.replace('.md', '')
                    }))
                    .sort((a, b) => b.date.localeCompare(a.date)) // æŒ‰æ—¥æœŸå€’åº
                    .slice(0, 10); // åªæ˜¾ç¤ºæœ€è¿‘10ç¯‡
                
                const dailyList = document.getElementById('daily-list');
                const dailyLoading = document.getElementById('daily-loading');
                const dailyEmpty = document.getElementById('daily-empty');
                
                if (links.length > 0) {
                    dailyList.innerHTML = '';
                    
                    links.forEach(link => {
                        const li = document.createElement('li');
                        li.className = 'file-item';
                        li.innerHTML = `
                            <a href="${link.url}" class="file-link" target="_blank">
                                <div class="file-title">${link.date} AIæ—¥æŠ¥</div>
                                <div class="file-date">ç‚¹å‡»æŸ¥çœ‹å®Œæ•´æŠ¥å‘Š</div>
                            </a>
                        `;
                        dailyList.appendChild(li);
                    });
                    
                    // æ›´æ–°ç»Ÿè®¡æ•°æ®
                    document.getElementById('report-count').textContent = links.length;
                    document.getElementById('last-update').textContent = links[0].date;
                    
                    dailyLoading.style.display = 'none';
                    dailyEmpty.style.display = 'none';
                    dailyList.style.display = 'block';
                    
                } else {
                    dailyLoading.style.display = 'none';
                    dailyEmpty.style.display = 'block';
                }
                
            } catch (error) {
                console.error('åŠ è½½æ—¥æŠ¥å¤±è´¥:', error);
                document.getElementById('daily-loading').innerHTML = 
                    '<div class="no-data">åŠ è½½å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥</div>';
            }
        }
        
        // åŠ è½½å›¾ç‰‡
        async function loadImages() {
            try {
                // è·å–æœ€æ–°æ—¥æœŸï¼ˆä»Šå¤©ï¼‰
                const today = new Date().toISOString().split('T')[0];
                
                // å°è¯•åŠ è½½ä»Šå¤©æ—¥æœŸçš„å›¾ç‰‡
                const response = await fetch(`./images/${today}/`);
                if (!response.ok) {
                    throw new Error('æ— æ³•è®¿é—®å›¾ç‰‡ç›®å½•');
                }
                
                const html = await response.text();
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, 'text/html');
                
                // æŸ¥æ‰¾å›¾ç‰‡æ–‡ä»¶
                const images = Array.from(doc.querySelectorAll('a'))
                    .filter(a => a.href.match(/\.(png|jpg|jpeg)$/i))
                    .map(a => ({
                        name: a.textContent,
                        url: a.href
                    }))
                    .slice(0, 6); // æœ€å¤šæ˜¾ç¤º6å¼ 
                
                const imageGrid = document.getElementById('image-grid');
                const imagesLoading = document.getElementById('images-loading');
                const imagesEmpty = document.getElementById('images-empty');
                
                if (images.length > 0) {
                    imageGrid.innerHTML = '';
                    
                    images.forEach(img => {
                        const div = document.createElement('div');
                        div.className = 'image-item';
                        div.innerHTML = `
                            <img src="${img.url}" alt="${img.name}" loading="lazy">
                        `;
                        imageGrid.appendChild(div);
                    });
                    
                    imagesLoading.style.display = 'none';
                    imagesEmpty.style.display = 'none';
                    imageGrid.style.display = 'grid';
                    
                } else {
                    // å¦‚æœæ²¡æœ‰ä»Šå¤©çš„å›¾ç‰‡ï¼Œå°è¯•åŠ è½½æ˜¨å¤©çš„
                    const yesterday = new Date();
                    yesterday.setDate(yesterday.getDate() - 1);
                    const yesterdayStr = yesterday.toISOString().split('T')[0];
                    
                    try {
                        const yesterdayResponse = await fetch(`./images/${yesterdayStr}/`);
                        if (yesterdayResponse.ok) {
                            const yesterdayHtml = await yesterdayResponse.text();
                            const yesterdayDoc = parser.parseFromString(yesterdayHtml, 'text/html');
                            
                            const yesterdayImages = Array.from(yesterdayDoc.querySelectorAll('a'))
                                .filter(a => a.href.match(/\.(png|jpg|jpeg)$/i))
                                .slice(0, 3);
                            
                            if (yesterdayImages.length > 0) {
                                imageGrid.innerHTML = '';
                                
                                yesterdayImages.forEach(a => {
                                    const div = document.createElement('div');
                                    div.className = 'image-item';
                                    div.innerHTML = `
                                        <img src="${a.href}" alt="${a.textContent}" loading="lazy">
                                    `;
                                    imageGrid.appendChild(div);
                                });
                                
                                imagesLoading.style.display = 'none';
                                imagesEmpty.style.display = 'none';
                                imageGrid.style.display = 'grid';
                                return;
                            }
                        }
                    } catch (e) {
                        // å¿½ç•¥é”™è¯¯
                    }
                    
                    imagesLoading.style.display = 'none';
                    imagesEmpty.style.display = 'block';
                }
                
            } catch (error) {
                console.error('åŠ è½½å›¾ç‰‡å¤±è´¥:', error);
                document.getElementById('images-loading').innerHTML = 
                    '<div class="no-data">å›¾ç‰‡åŠ è½½å¤±è´¥</div>';
            }
        }
        
        // æ£€æŸ¥ç³»ç»ŸçŠ¶æ€
        async function checkSystemStatus() {
            try {
                // å°è¯•è®¿é—®ä¸€ä¸ªå·²çŸ¥å­˜åœ¨çš„æ–‡ä»¶
                const response = await fetch('./daily/');
                if (response.ok) {
                    document.getElementById('system-status').textContent = 'è¿è¡Œæ­£å¸¸';
                    document.getElementById('system-status').className = 'status-value status-good';
                } else {
                    document.getElementById('system-status').textContent = 'éƒ¨åˆ†å¼‚å¸¸';
                    document.getElementById('system-status').className = 'status-value';
                }
            } catch (error) {
                document.getElementById('system-status').textContent = 'æ£€æŸ¥å¤±è´¥';
                document.getElementById('system-status').className = 'status-value';
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆåçš„åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentTime();
            loadDailyReports();
            loadImages();
            checkSystemStatus();
            
            // æ¯åˆ†é’Ÿæ›´æ–°æ—¶é—´
            setInterval(updateCurrentTime, 60000);
            
            // æ¯5åˆ†é’Ÿé‡æ–°åŠ è½½å†…å®¹
            setInterval(() => {
                loadDailyReports();
                loadImages();
                checkSystemStatus();
            }, 300000);
            
            // æ˜¾ç¤ºç¼“å­˜æç¤º
            const lastVisit = localStorage.getItem('lastVisit');
            const now = Date.now();
            
            if (!lastVisit || now - parseInt(lastVisit) > 3600000) { // 1å°æ—¶
                document.getElementById('cache-alert').style.display = 'block';
            } else {
                document.getElementById('cache-alert').style.display = 'none';
            }
            
            localStorage.setItem('lastVisit', now.toString());
        });
        
        // æä¾›æ‰‹åŠ¨åˆ·æ–°æŒ‰é’®çš„åŠŸèƒ½
        window.refreshContent = function() {
            document.getElementById('daily-loading').style.display = 'block';
            document.getElementById('daily-list').style.display = 'none';
            document.getElementById('daily-empty').style.display = 'none';
            
            document.getElementById('images-loading').style.display = 'block';
            document.getElementById('image-grid').style.display = 'none';
            document.getElementById('images-empty').style.display = 'none';
            
            loadDailyReports();
            loadImages();
            checkSystemStatus();
            
            alert('å†…å®¹å·²åˆ·æ–°ï¼');
        };
    </script>
</body>
</html>
